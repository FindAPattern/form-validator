<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: FormValidator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: FormValidator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var Field = require('./Field');
var Rule = require('./Rule');
var Validation = require('./Validation');

/**
 * Represents a form validator.
 * 
 * @constructor
 */
function FormValidator() {
  this.validators = {};
  this.fields = {};
}

/**
 * Stores a reusable field validator for use by rules contained within 
 * this validator. 
 *
 * @param {string} validatorName - Name by which to retrieve validators.
 * @param {function} fieldValidator - Field validator to store. 
 * @returns {FormValidator}
 */
FormValidator.prototype.addFieldValidator = function (validatorName, fieldValidator) {
  this.validators[validatorName] = fieldValidator;
  
  return this;
}

/**
 * Retrieves a reusable field validator by its name. The validator returned 
 * will retrieve the internal validator upon calling it, allowing rules to 
 * evaluate validators added after the rules were created. 
 *
 * @param {string} validatorName - Name of validator to retrieve. 
 * @returns {function}
 */
FormValidator.prototype.fieldValidator = function (validatorName) {
  return function (fieldName, formData, settings, next) {
    return this.validators[validatorName](fieldName, formData, settings, next);
  }.bind(this);
}

/**
 * Checks of the form validator contains a field validator. 
 *
 * @param {string} validatorName - Name of validator to retrieve. 
 * @returns {Boolean}
 */
FormValidator.prototype.hasFieldValidator = function (validatorName) {
  return !!this.validators[validatorName];
}

/**
 * Retrieves a field by its name. 
 *
 * @param {string} fieldName - Name of field to retrieve. 
 * @returns {Field}
 */
FormValidator.prototype.field = function (fieldName) {
  return this.fields[fieldName] = (this.fields[fieldName] || new Field(fieldName));
}

/**
 * Retrieves a list of all field names stored by this validator. 
 *
 * @returns {string[]}
 */
FormValidator.prototype.fieldNames = function () {
  return Object.keys(this.fields);
}

/**
 * Validates all rules on all fields stored in this validation, using only 
 * the reusable validators stored in this validation, against form data 
 * structured as: {
 *   "fieldName": "fieldValue"
 * }. 
 *
 * @param {Object} form - Form data to validate. 
 * @returns {Validation}
 */
FormValidator.prototype.validate = function (form) {
  return this.fieldNames()
    .map(function (fieldName) {
      return this.field(fieldName).validate(form);
    }.bind(this))
    .reduce(Validation.merge);
}

module.exports = FormValidator;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Field.html">Field</a></li><li><a href="FormValidator.html">FormValidator</a></li><li><a href="FormValidatorFactory.html">FormValidatorFactory</a></li><li><a href="Rule.html">Rule</a></li><li><a href="Validation.html">Validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#length">length</a></li><li><a href="global.html#matches">matches</a></li><li><a href="global.html#required">required</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a> on Thu Apr 09 2015 08:08:07 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
